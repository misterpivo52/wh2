<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}–ú–æ—ó —É–ª—é–±–ª–µ–Ω—ñ –º—ñ—Å—Ü—è{% endblock %}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <h1><a href="{% url 'places:index' %}">–ú–æ—ó —É–ª—é–±–ª–µ–Ω—ñ –º—ñ—Å—Ü—è</a></h1>
            </div>
            <ul class="nav-links">
                <li><a href="{% url 'places:index' %}">–ì–æ–ª–æ–≤–Ω–∞</a></li>
                <li><a href="{% url 'places:places_list' %}">–°–ø–∏—Å–æ–∫ –º—ñ—Å—Ü—å</a></li>
                <li><a href="{% url 'places:add_place' %}">–î–æ–¥–∞—Ç–∏ –º—ñ—Å—Ü–µ</a></li>
            </ul>
        </nav>
    </header>

    <main>
        {% block content %}
        {% endblock %}
    </main>

    <footer>
        <p>&copy; 2024 –°—Ç–≤–æ—Ä–µ–Ω–æ [–í–∞—à–µ —ñ–º'—è] –¥–ª—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –∑ Django</p>
    </footer>

    <script>
        function getRandomPlace() {
            fetch('{% url "places:random_place" %}', {
                method: 'GET',
                headers: {
                    'X-Requested-With': 'XMLHttpRequest',
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    const container = document.getElementById('random-place-result');
                    const starsHtml = '‚òÖ'.repeat(data.place.rating) + '‚òÜ'.repeat(5 - data.place.rating);

                    container.innerHTML = `
                        <div class="place-preview selected-place">
                            <h3>${data.place.name}</h3>
                            <p><strong>–¢–∏–ø:</strong> ${data.place.place_type}</p>
                            <p><strong>–õ–æ–∫–∞—Ü—ñ—è:</strong> ${data.place.location || 'Secret placeüëÄ'}</p>
                            <p><strong>–†–µ–π—Ç–∏–Ω–≥:</strong> <span class="stars">${starsHtml}</span></p>
                            <p><strong>–û–ø–∏—Å:</strong> ${data.place.description.substring(0, 100)}${data.place.description.length > 100 ? '...' : ''}</p>
                            <a href="/place/${data.place.id}/" class="btn-link">–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ</a>
                        </div>
                    `;
                } else {
                    document.getElementById('random-place-result').innerHTML =
                        `<p class="error">${data.error}</p>`;
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('random-place-result').innerHTML =
                    '<p class="error">–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ</p>';
            });
        }
    </script>
</body>
</html>